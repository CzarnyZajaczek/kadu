<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-2">
  <title>Format historii</title>
</head>
<body>
<h3><span style="text-decoration: underline;">Wstêpna propozycja</span></h3>
<br>
Zdarzenia zachodz±ce w Kadu zapisuj± siê w pliku<br>
$HOME/.gg/history/all.dat<br>
Plik zawiera jako pierwsze 4 bajty identyfikator w formacie ASCII:<br>
<span style="font-style: italic;">KADU</span><br>
Format zdarzenia:<br>
<span style="font-style: italic;">type</span> - 32-bity       typ
zdarzenia<br>
<span style="font-style: italic;">time</span> - 32-bity    czas zaj¶cia
zdarzenia<br>
<span style="font-style: italic;">uin </span>- 32-bity        uin
nadawcy<br>
<span style="font-style: italic;">nicklen</span> - 32-bity      d³ugo¶æ
nicku nadawcy<br>
<span style="font-style: italic;">len</span> - 32-bity        d³ugo¶æ
frazy zwi±zanej ze zdarzeniem<br>
<span style="font-style: italic;">mobilelen</span> - 32-bity    d³ugo¶æ
numeru komórki odbiorcy<br>
<span style="font-style: italic;">filler</span> - 8 bajtów wype³nienia
zarezerwowane do wykorzystania w przysz³o¶ci<br>
<span style="font-style: italic;">nick</span> - nicklen bajtów z nickiem
nadawcy<br>
<span style="font-style: italic;">text</span> - len bajtów z fraz±<br>
<span style="font-style: italic;">mobile</span> - mobilelen bajtów z
numerem telefonu komórkowego odbiorcy<br>
Powy¿szy plik zawiera opis wszystkich zdarzeñ zachodz±cych w Kadu w
porz±dku chronologicznym.<br>
Mo¿liwe typy zdarzeñ (pole <span style="font-style: italic;">type</span>)<br>
bit31 = 1 - zdarzenie zaznaczone do skasowania;<br>
bit30 = 1 - zdarzenie wygenerowane przez nas; bit30 = 0 - zdarzenie
wygenerowane przez kogo¶;<br>
bit29 = 1 - zdarzenie wygenerowane przez osobê ignorowan± przez nas;<br>
bit28 = 1 - zmiana statusu;<br>
bit27 = 1 - status z opisem;<br>
bit3 - bit0 - numer statusu:<br>
    0 - "dostêpny"<br>
    1 - "zaraz wracam"<br>
    2 - "ukryty"<br>
    3 - "niedostêpny"<br>
    4 - 7 - niewykorzystane<br>
bit26 = 1 - wiadomo¶æ;<br>
bit7 - bit4 - typ wiadomo¶ci:<br>
    0 - "message"<br>
    1 - "chat"<br>
    2 - 6 - niewykorzystane<br>
    7 - "sms"<br>
<br>
Dla ka¿dej grupy u¿ytkowników [uin1,uin2,....,uinN] tworzony jest plik
o nazwie:<br>
<span style="font-style: italic;">uin1_uin2_..._uinN.idx</span><br>
zawieraj±cy zbiór 32-bitowych offsetów zdarzeñ z pliku all.dat.<br>
Offsety s± zapisane w ten sposób, ¿e odczytywane za ich pomoc±
zdarzenia s± uporz±dkowane ze wzglêdu na czas (porz±dek chronologiczny).
Offset równy 0 oznacza skasowane zdarzenie.<br>
<br>
Dla ka¿dego numeru telefonu komórkowego na który zosta³ wys³any
jakikolwiek sms tworzony jest plik o nazwie:<br>
<span style="font-style: italic;">mNUMER.idx<br>
</span>zawieraj±cy zbiór 32-bitowych offsetów zdarzeñ z pliku all.dat.<br>
Offsety s± zapisane podobnie jak dla wcze¶niejszego typu pliku.<br>
<span style="font-style: italic;"><span style="font-style: italic;"></span></span><br>
Co o tym my¶licie?<br>
<br>
</body>
</html>
